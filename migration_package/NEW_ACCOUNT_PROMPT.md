# 新账号初始化提示词

## 使用说明

将以下提示词复制到新 Manus 账号的对话中，Manus AI 将自动从 GitHub 恢复完整的 Math AI Tutor 项目。

---

## 提示词（复制以下全部内容）

```
我需要从 GitHub 仓库恢复一个现有的 Math AI Tutor 项目。

GitHub 仓库地址：https://github.com/a19978101099-boop/math-ai-tutor.git

这是一个专为香港 DSE 数学考试设计的智能学习平台，基于 Manus 的 tRPC + Database + User Auth 模板构建。

## 项目功能概述

### 核心功能
1. **管理员题目上传**：管理员可以上传数学题目和答案图片，AI 自动识别提取信息
2. **AI 视觉识别**：自动从图片中提取题目文字（包含 LaTeX 公式）、已知条件和解题步骤
3. **智能 AI 提示**：学生点击步骤后可以获取两种提示
   - "怎么得到这一步？" - 解释当前步骤的推理过程
   - "下一步怎么思考？" - 给出下一步的思考方向
4. **已知条件解释**：点击已知条件可以获取 AI 对该条件的解释
5. **苏格拉底式引导模式**：通过一系列选择题逐步引导学生理解解题思路
6. **学习进度追踪**：记录学生的学习行为（查看次数、获取提示次数等）
7. **答案图片显示**：可折叠的答案区域，默认隐藏，鼓励学生先自己思考
8. **数学公式渲染**：使用 KaTeX 渲染 LaTeX 格式的数学公式
9. **AI 提示语音播放**：使用 Web Speech API 朗读 AI 提示内容

### 技术特点
- 前端：React 19 + TypeScript + Tailwind CSS 4 + shadcn/ui
- 后端：Express 4 + tRPC 11 + Drizzle ORM
- 数据库：MySQL/TiDB（三张表：problems、users、user_progress）
- AI 集成：Manus LLM API（视觉识别 + 文本生成）
- 认证：Manus OAuth + JWT
- 权限系统：公开访问题目，管理员专用上传功能

### 页面布局设计
项目使用深色主题（深蓝色背景）+ 青色强调色，具有以下页面：

1. **首页（/）**：题目列表，显示题目卡片（包含题目图片、标题、步骤数）
2. **题目详情页（/problem/:id）**：
   - 左侧：题目图片、题目文字、已知条件、解题步骤、答案图片
   - 右侧：苏格拉底模式（sticky 定位）
   - 步骤交互：点击步骤显示两个按钮（"怎么得到这一步？"和"下一步怎么思考？"）
   - AI 提示直接显示在步骤下方，包含语音播放按钮
3. **管理员上传页（/admin/upload）**：仅管理员可访问，上传题目和答案图片
4. **学习进度页（/progress）**：展示学习统计数据和可视化图表

### 数据库结构

#### problems 表
- id, userId, title, problemText, problemImageUrl, problemImageKey
- solutionImageUrl, solutionImageKey, steps (JSON), conditions (JSON)
- createdAt, updatedAt

#### users 表
- id, openId, name, email, role (enum: 'admin' | 'user')
- createdAt, updatedAt, lastSignedIn

#### user_progress 表
- id, userId (openId), problemId, viewCount, hintCount, conditionClickCount
- stepsRevealed, viewedSolution, firstViewedAt, lastViewedAt

## 请帮我完成以下操作

1. **从 GitHub 克隆项目**：克隆上述仓库到 Manus 环境
2. **安装依赖**：运行 `pnpm install`
3. **初始化数据库**：运行 `pnpm db:push` 推送 schema
4. **启动开发服务器**：运行 `pnpm dev`
5. **验证项目状态**：检查开发服务器是否正常运行

## 重要说明

- 项目使用 Manus 内置的 LLM API、OAuth 认证和数据库，无需额外配置 API 密钥
- 所有环境变量由 Manus 平台自动注入
- 数据库数据（题目）需要单独导入，我会在初始化完成后提供 JSON 文件

请开始执行上述操作。
```

---

## 初始化完成后的后续步骤

### 步骤 1：导入题目数据

初始化完成后，发送以下消息并上传 `problems_data.json` 文件：

```
项目初始化完成了吗？现在我需要导入题目数据。

我有一个 JSON 文件包含 2 道预置题目的完整数据（题目文字、图片 URL、解题步骤、已知条件等）。

请帮我将这些数据插入到 problems 表中。
```

### 步骤 2：设置管理员权限

如果您需要上传新题目，需要设置管理员权限：

```
请将我的账号设置为管理员（role = 'admin'），这样我就可以使用题目上传功能了。
```

### 步骤 3：测试功能

要求 Manus AI 测试核心功能：

```
请帮我测试以下功能是否正常：

1. 访问首页，确认显示 2 道题目
2. 点击题目进入详情页
3. 点击解题步骤，测试"怎么得到这一步？"和"下一步怎么思考？"按钮
4. 点击已知条件，查看 AI 解释
5. 点击"开始苏格拉底引导"，测试引导模式
6. 点击"查看答案"，确认答案图片显示

如果发现任何问题，请帮我修复。
```

---

## 常见问题处理

### 问题 1：图片无法显示

**症状**：题目或答案图片显示为损坏的图标

**原因**：图片存储在原账号的 S3 中，新账号无法访问

**解决方案**：

```
题目图片无法显示。请帮我处理图片迁移：

1. 从 problems_data.json 中提取所有图片 URL
2. 下载这些图片到本地
3. 重新上传到新账号的 S3
4. 更新数据库中的图片 URL 和 key

或者，我可以使用管理员上传功能重新上传题目。
```

### 问题 2：数据库连接失败

**症状**：启动服务器时报数据库连接错误

**解决方案**：

```
数据库连接失败。请帮我检查：

1. DATABASE_URL 环境变量是否正确注入
2. pnpm db:push 是否成功执行
3. 数据库表是否正确创建

如果需要，请重新运行 pnpm db:push。
```

### 问题 3：LLM API 调用失败

**症状**：AI 提示或视觉识别功能不工作

**解决方案**：

```
LLM API 调用失败。请帮我检查：

1. BUILT_IN_FORGE_API_KEY 和 BUILT_IN_FORGE_API_URL 是否正确注入
2. 查看 .manus-logs/devserver.log 中的错误信息
3. 测试一个简单的 LLM API 调用

如果是配额问题，我会联系 Manus 支持。
```

---

## 验证清单

初始化完成后，确认以下项目都正常工作：

- [ ] 开发服务器成功启动
- [ ] 首页显示题目列表
- [ ] 题目详情页正确显示（左右两列布局）
- [ ] 题目文字和图片正确显示
- [ ] 已知条件可以点击并获取 AI 解释
- [ ] 解题步骤可以点击并显示两个按钮
- [ ] "怎么得到这一步？"按钮正常工作
- [ ] "下一步怎么思考？"按钮正常工作
- [ ] AI 提示正确显示（包含数学公式渲染）
- [ ] 语音播放按钮正常工作
- [ ] 苏格拉底模式可以启动并完成引导
- [ ] 答案图片可以显示和隐藏
- [ ] 管理员上传页面可以访问（需要管理员权限）
- [ ] 学习进度页面正常显示

---

**文档版本**: 1.0  
**最后更新**: 2026-01-28  
**作者**: Manus AI
