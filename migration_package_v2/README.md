# Math AI Tutor - 迁移包 v2.0

## 📦 包含文件

- **NEW_ACCOUNT_PROMPT.md** - 新账号初始化提示词（必读）
- **problems_data.json** - 2 道预置题目数据（包含正确的 LaTeX 格式）
- **MIGRATION_GUIDE.md** - 完整的技术迁移指南（故障排除参考）
- **README.md** - 本文件

---

## 🚀 快速开始（3 步完成迁移）

### 第一步：初始化项目

1. 在新 Manus 账号中开启对话
2. 打开 `NEW_ACCOUNT_PROMPT.md`
3. 复制里面的完整提示词（从 ``` 开始到结束）
4. 粘贴到新对话中发送
5. 等待 2-3 分钟，Manus AI 会自动从 GitHub 克隆项目并完成初始化

### 第二步：导入题目数据

初始化完成后，在对话中发送：
```
请帮我导入题目数据
```
然后上传 `problems_data.json` 文件。

### 第三步：设置管理员权限（可选）

如果您需要上传新题目，发送：
```
请将我的账号设置为管理员
```

完成！访问首页查看题目列表。

---

## ✨ 新版本特性（v2.0）

相比 v1.0，本版本包含以下重要更新：

### 1. 中英文题目显示
- 题目详情页现在先显示中文题目文字，然后是英文题目文字，最后才是题目图片
- 所有数学符号使用 LaTeX 格式（`$\angle ABC$`），通过 KaTeX 完美渲染

### 2. 优化的 AI 识别系统
- AI 提示词已优化，明确要求提取 LaTeX 格式的数学公式
- 提供详细的 LaTeX 格式示例（角度、三角形、平行、全等等）
- 识别准确率显著提升

### 3. 可编辑的上传界面
- 管理员上传页面现在显示可编辑的中英文题目文本框
- 支持手动修正 AI 识别结果
- 提供 LaTeX 格式提示，帮助正确输入数学符号

### 4. 改进的布局设计
- 题目详情页采用左右两列布局
- 左侧：题目信息、已知条件、解题步骤、答案图片
- 右侧：苏格拉底模式（sticky 定位，始终可见）

### 5. 增强的步骤交互
- 点击步骤后显示两个按钮："怎么得到这一步？"和"下一步怎么思考？"
- AI 提示直接显示在步骤下方，无需跳转

---

## 📋 项目信息

**GitHub 仓库**：https://github.com/a19978101099-boop/math-ai-tutor.git

**技术栈**：
- 前端：React 19 + Tailwind CSS 4 + Wouter
- 后端：Express 4 + tRPC 11
- 数据库：MySQL（Manus 平台提供）
- AI：Manus LLM API（自动注入）
- 数学公式：KaTeX

**核心功能**：
- DSE 数学题目展示（中英文 + LaTeX 公式渲染）
- AI 逐步解题提示系统
- 苏格拉底式教学模式
- 学习进度追踪
- 管理员题目上传和 AI 识别

---

## 🔧 故障排除

### 问题 1：图片无法显示

**原因**：图片 URL 指向原账号的 S3 存储

**解决方案**：使用管理员上传功能重新上传题目图片，或要求 Manus AI 帮助迁移图片

### 问题 2：数学公式无法渲染

**原因**：题目数据中的数学符号未使用正确的 LaTeX 格式

**解决方案**：
- 确保所有数学符号都用 `$` 包裹
- 例如：`$\angle ABC$`、`$\triangle ABC$`、`$AB \parallel CD$`
- 使用管理员上传功能重新创建题目，AI 会自动转换为正确的 LaTeX 格式

### 问题 3：管理员上传功能无法使用

**原因**：当前用户角色不是 `admin`

**解决方案**：发送消息"请将我的账号设置为管理员"

更多故障排除方法请参考 `MIGRATION_GUIDE.md`。

---

## 📚 LaTeX 格式快速参考

| 符号 | LaTeX 代码 | 示例 |
|------|-----------|------|
| 角度 | `\angle` | `$\angle ABC$` |
| 三角形 | `\triangle` | `$\triangle ABC$` |
| 平行 | `\parallel` | `$AB \parallel CD$` |
| 全等 | `\cong` | `$\triangle ABC \cong \triangle DEF$` |
| 度数 | `°` | `$\angle ABC = 90°$` |
| 分数 | `\frac{a}{b}` | `$\frac{1}{2}$` |

完整的 LaTeX 格式指南请参考 `MIGRATION_GUIDE.md`。

---

## 💡 后续优化建议

1. **实时预览**：在管理员上传页面添加 LaTeX 实时预览功能
2. **LaTeX 快捷输入**：提供常用数学符号按钮，一键插入正确的 LaTeX 代码
3. **批量上传**：支持一次上传多张图片，AI 自动识别并创建多道题目
4. **错题本系统**：自动记录学生获取提示次数超过 3 次的题目
5. **题目分类**：为题目添加标签（代数、几何、三角函数等），支持筛选

---

## 📞 技术支持

如果遇到任何问题：

1. 查阅 `MIGRATION_GUIDE.md` 的故障排除章节
2. 检查开发服务器日志（`.manus-logs/devserver.log`）
3. 向 Manus AI 描述具体的错误信息
4. 访问 Manus 帮助中心：https://help.manus.im

---

## 📝 更新日志

### v2.0 (2026-01-28)
- 添加中英文题目显示功能
- 优化 AI 识别系统，支持 LaTeX 格式
- 添加可编辑的上传界面
- 改进题目详情页布局（左右两列）
- 增强步骤交互（双按钮模式）

### v1.0 (2026-01-27)
- 初始版本
- 基础题目展示和 AI 提示功能
- 学习进度追踪
- 管理员上传功能

---

**迁移包版本**：2.0  
**生成时间**：2026-01-28  
**作者**：Manus AI
