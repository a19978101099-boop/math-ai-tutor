# Math AI Tutor - 新账号初始化提示词

## 使用方法

1. 在新 Manus 账号中开启对话
2. 复制下面的提示词（从 ``` 开始到结束的所有内容）
3. 粘贴到新对话中发送
4. 等待 Manus AI 从 GitHub 克隆项目并完成初始化（约 2-3 分钟）

---

## 提示词（复制以下全部内容）

```
请帮我从 GitHub 克隆并初始化一个现有的 DSE 数学学习平台项目。

**项目信息：**
- GitHub 仓库：https://github.com/a19978101099-boop/math-ai-tutor.git
- 项目名称：Math AI Tutor（数学 AI 辅导助手）
- 项目类型：Web 应用（基于 tRPC + Database + User Auth 模板）

**项目简介：**
这是一个专为香港 DSE 数学考试设计的智能学习平台，提供逐步解题指导和苏格拉底式教学。

**核心功能：**
1. **题目展示**：显示中文和英文题目文字（LaTeX 格式），然后显示题目图片
2. **已知条件**：自动提取并列出题目的已知条件，可点击查看每个条件的作用
3. **解题步骤**：分步骤展示解题过程，支持 LaTeX 数学公式渲染
4. **AI 提示系统**：
   - 点击步骤后显示两个按钮："怎么得到这一步？"和"下一步怎么思考？"
   - AI 提示直接显示在步骤下方
5. **苏格拉底模式**：右侧独立区域，通过提问引导学生思考
6. **答案图片**：左侧底部可折叠的答案区域
7. **语音播放**：AI 提示支持语音朗读
8. **学习进度追踪**：记录每道题的完成状态和提示获取次数
9. **管理员上传**：支持上传题目和答案图片，AI 自动识别并提取中英文题目、步骤和条件

**技术栈：**
- 前端：React 19 + Tailwind CSS 4 + Wouter（路由）
- 后端：Express 4 + tRPC 11
- 数据库：MySQL（Manus 平台提供）
- AI：Manus LLM API（自动注入）
- 数学公式渲染：KaTeX
- 语音合成：Web Speech API

**数据库结构：**

1. **users 表**（由模板提供）
   - id, openId, name, avatar, role（admin/user）

2. **problems 表**（题目表）
   - id：题目 ID
   - title：题目标题
   - problemText：中文题目文字（LaTeX 格式）
   - problemTextEn：英文题目文字（LaTeX 格式）
   - problemImageUrl：题目图片 URL
   - problemImageKey：题目图片 S3 key
   - solutionImageUrl：答案图片 URL
   - solutionImageKey：答案图片 S3 key
   - steps：解题步骤（JSON 数组）
   - conditions：已知条件（JSON 数组）
   - createdAt, updatedAt

3. **progress 表**（学习进度表）
   - id：进度记录 ID
   - userId：用户 ID
   - problemId：题目 ID
   - completed：是否完成
   - hintsUsed：使用提示次数
   - lastViewedAt：最后查看时间

**页面结构：**

1. **首页（/）**：显示所有题目列表，每个题目卡片显示标题、步骤数和题目图片缩略图
2. **题目详情页（/problem/:id）**：
   - 左侧：中文题目 → 英文题目 → 题目图片 → 已知条件 → 解题步骤 → 答案图片
   - 右侧：苏格拉底模式（sticky 定位）
3. **学习进度页（/progress）**：显示用户的学习统计和完成的题目列表
4. **管理员上传页（/admin/upload）**：
   - 上传题目和答案图片
   - AI 自动提取中英文题目、步骤和条件
   - 可编辑的文本框，支持手动修正识别结果
   - LaTeX 格式提示

**重要的实现细节：**

1. **LaTeX 格式**：所有数学符号必须用 $ 包裹，例如：
   - 角度：`$\angle ABC = 39°$`
   - 三角形：`$\triangle ABC$`
   - 平行：`$AC \parallel ED$`
   - 全等：`$\triangle ABC \cong \triangle AED$`

2. **AI 提示系统**：
   - 使用 Manus LLM API（`invokeLLM`）
   - 提示词强调 LaTeX 格式和详细示例
   - 支持三种模式：why（怎么得到这一步）、next（下一步怎么思考）、explainCondition（解释条件）

3. **题目识别**：
   - 使用 LLM Vision API 识别图片中的文字
   - 自动提取中文题目、英文题目、已知条件和解题步骤
   - 所有数学符号自动转换为 LaTeX 格式

4. **布局设计**：
   - 左右两列布局（题目详情页）
   - 左侧：题目信息和步骤（可滚动）
   - 右侧：苏格拉底模式（sticky，始终可见）

**初始化步骤：**

1. 克隆 GitHub 仓库到项目目录
2. 运行 `pnpm install` 安装依赖
3. 运行 `pnpm db:push` 创建数据库表
4. 启动开发服务器

**初始化完成后，请告诉我：**
1. 项目已成功克隆并初始化
2. 开发服务器已启动
3. 数据库表已创建

然后我会上传题目数据文件（problems_data.json）来导入预置的 2 道题目。
```

---

## 初始化完成后的步骤

### 第一步：导入题目数据

发送消息：
```
请帮我导入题目数据
```

然后上传 `problems_data.json` 文件。

### 第二步：设置管理员权限

发送消息：
```
请将我的账号设置为管理员，以便我可以上传新题目
```

### 第三步：测试功能

访问以下页面测试功能：
1. 首页：查看题目列表
2. 题目详情页：测试 AI 提示和苏格拉底模式
3. 管理员上传页：测试题目上传和识别功能

---

## 故障排除

### 问题 1：图片无法显示

**原因**：图片 URL 指向原账号的 S3 存储

**解决方案**：
1. 使用管理员上传功能重新上传题目图片
2. 或者要求 Manus AI 帮助迁移图片到新账号的 S3

### 问题 2：数据库连接失败

**原因**：环境变量未正确注入

**解决方案**：
1. 检查 `.env` 文件是否存在
2. 运行 `pnpm db:push` 重新创建表
3. 重启开发服务器

### 问题 3：LLM API 调用失败

**原因**：API 密钥未正确配置

**解决方案**：
1. 检查环境变量 `BUILT_IN_FORGE_API_KEY` 是否存在
2. 重启开发服务器
3. 如果问题持续，联系 Manus 支持

---

## 注意事项

1. **数学公式格式**：所有数学符号必须用 `$` 包裹，否则无法正确渲染
2. **图片迁移**：原账号的 S3 图片可能无法直接访问，需要重新上传
3. **管理员权限**：默认情况下，项目所有者自动拥有管理员权限
4. **GitHub 同步**：项目已连接到 GitHub，每次保存检查点会自动同步

---

## 技术支持

如果遇到任何问题，请：
1. 检查开发服务器日志（`.manus-logs/devserver.log`）
2. 检查浏览器控制台错误（`.manus-logs/browserConsole.log`）
3. 向 Manus AI 描述具体的错误信息
